<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MKT96K5');</script>
    <!-- End Google Tag Manager -->
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating Shipment Groups | Sorted Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating Shipment Groups | Sorted Docs ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/c4a9dfb254.js" crossorigin="anonymous"></script>
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link rel="stylesheet" href="../../../../styles/theme-switcher.css">
  
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta id="docfx-style:rel" content="../../../../">
    <!--prevent caching the HTML-->
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKT96K5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar top-bar"></span>
                <span class="icon-bar middle-bar"></span>
                <span class="icon-bar bottom-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" src="../../../../images/sorted_logo.svg" height="auto" width="auto" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar"> 
              <div class="theme-switch-wrapper">
                <label class="theme-switch" for="theme-switcher">
                  <input type="checkbox" id="theme-switcher">
                  <div class="slider round"></div>
                </label>
              </div> 
              <div>
                <form class="navbar-form navbar-right" role="search" id="search">
                    <div class="form-group">
                    <i class="fas fa-search"></i>
                    <input type="text" class="form-control" id="search-query" placeholder="Search our documentation..." autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default custom">
            <div class="container">
                <div class="row row-nomargin">
                    <div class="hide-when-search col-sm-6" id="breadcrumb">
                        <div class="col-md-6">
                            <ul class="breadcrumb">
                            <li></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>      </header>
      <div class="container body-content">
        
        <div id="search-results" class="tech-docs">
        <div class="row">
            <div class="col-md-12">
                <button id="close-search" type="button" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;Back</button>
            </div>
        </div>
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10 docs-body" id="docfx-page-content">
            <article class="content wrap" id="_content" data-uid="pro-api-help-shipments-creating-shipment-groups">
<h1 id="creating-shipment-groups">Creating Shipment Groups</h1>

<!-- Time to read article - render code -->
<!--
<div class="page-stats row visible-xs">
    <ul class="page-metadata">
        <li class="li-page-date">
            08/10/2020
        </li>
        <li class="li-time-to-read">
             ~4 minutes  to read
        </li>
    </ul>
</div>
<div class="page-stats row visible-sm visible-md visible-lg visible-xl">
    <ul class="page-metadata">
        <li class="li-page-date">
            08/10/2020
        </li>
        <li class="li-time-to-read">
             ~4 minutes  to read
        </li>
        <li class="contributor-li">
            <img src="https://www.gravatar.com/avatar/75aba8f6bb41171675ba3ced4172e9cb.jpg?d=robohash" class="img-circle img-contributor" title="andy.walton@sorted.com"/>
            <span class="tooltip-text">andy.walton@sorted.com</span>
        </li>
    </ul>
</div>
-->

<div class="page-tags">
    <span class="glyphicon glyphicon-tags"></span>
    <ul class="tags">
        <li class="tag-search">v2</li>
        <li class="tag-search">shipments</li>
        <li class="tag-search">pro</li>
        <li class="tag-search">api</li>
        <li class="tag-search">shipment groups</li>
    </ul>
</div>

<p>This page explains how to use the <strong>Create Shipment Groups</strong> endpoint to create new shipment groups.</p>
<hr>
<h2 id="the-create-shipment-groups-request">The Create Shipment Groups Request</h2>
<p>To call <strong>Create Shipment Group</strong>, send a <code>POST</code> request to <code>https://api.sorted.com/pro/shipment_groups</code>. The body of the request should contain a list of up to 10,000 <code>shipments</code> that you want to add to the group, and an optional <code>custom_reference</code> that can be used as an identifier for the group.</p>
<h3 id="shipment-group-validation">Shipment Group Validation</h3>
<p>All <strong>Create Shipment Group</strong> requests must conform to the following validation rules:</p>
<ul>
<li>You must provide between 1 and 10,000 references in the <code>shipments</code> list.</li>
<li>All references must be for existing <code>shipments</code> that you have access to.</li>
<li>All <code>shipments</code> must be in a state of either <code>allocated</code> or <code>manifested</code>.</li>
<li>All <code>shipments</code> must have the same <code>origin</code> address or same <code>origin</code> shipping location reference.</li>
<li>A <code>shipment</code> may only be a member of one <strong>open</strong> <code>shipment_group</code> at any one time.</li>
</ul>
<p>However, PRO still creates the group if you provide a reference for an invalid shipment, as long as there is at least once valid reference in the request.</p>
<p>Shipment groups cannot share a <code>custom_reference</code> with another open shipment group. However, you can re-use previous <code>custom_references</code> as long as all previous groups that have used that reference are closed. <code>custom_reference</code> values must be URL-safe (that is, they cannot contain characters such as <code>/</code>, <code>\</code>, <code>?</code>, <code>@</code> unless encoded).</p>
<h2 id="the-create-shipment-group-response">The Create Shipment Group Response</h2>
<p>Once it has received and validated the request, PRO creates the shipment group and returns a Resource Result including the following information:</p>
<ul>
<li><code>reference</code>. This is an auto-generated unique reference for the group. It is not to be confused with the <code>custom_reference</code>.</li>
<li><code>custom_reference</code> - The custom reference specified in the request.</li>
<li><code>version</code> - An integer indicating the number of times that the <code>custom_reference</code> has been used.</li>
<li><code>errors</code> - Indicates any shipments in the request that failed validation and could not be added to the group.</li>
</ul>
<h3 id="versioning">Versioning</h3>
<p>Versioning enables you to identify any shipment group by <code>custom_reference</code>, even though <code>custom_references</code> can be re-used as long as they are not shared with any open groups.</p>
<p>When you specify a <code>custom_reference</code> for a shipment group, PRO assigns that group a <code>version</code> number. Combined, the <code>custom_reference</code> and <code>version</code> provide a unique identifier for the group. A group's <code>version</code> number indicates how many times you have used that group's <code>custom_reference</code>.</p>
<p>For example, suppose that you choose to use shipment groups to represent carrier trailers, so that you can manifest an entire trailer of shipments at once. To this end, you create a shipment group with a <code>custom_reference</code> of <em>CarrierX-PM</em> to represent Carrier X's daily afternoon collection.</p>
<p>The first time you create this group, the group has a <code>version</code> number of <em>1</em>. You add the relevant shipments to the group, manifest them using the <strong>Manifest Shipments by Shipment Group</strong> endpoint as they are picked up, and then close the shipment group.</p>
<p>The following day, you create a new shipment group for that day's collection. As before, you use a <code>custom_reference</code> of <em>CarrierX-PM</em>. This time, however, PRO responds with a <code>version</code> number of <em>2</em>, as this is the second time that that <code>custom_reference</code> has been used.</p>
<p>You can now use the version number to point to the shipment group you want. <em>CarrierX-PM</em> version <em>1</em> points to the original (now closed) shipment group, while <em>CarrierX-PM</em> version <em>2</em> points to the new group. Note that both groups also have unique (PRO-generated) <code>references</code>.</p>

<p>Shipment group versioning is used when retrieving shipment groups, when adding or removing shipments from a group, and when generating collection notes.</p>
<div class="NOTE">
<h5>Note</h5>
<ul>
<li>For more information on retrieving shipment groups, see the <a href="getting_shipment_groups.html">Getting Shipment Groups</a> page.</li>
<li>For more information on adding and removing shipments from a group, see the <a href="editing_shipment_groups.html">Editing Shipment Groups</a> page.</li>
<li>For more information on generating collection notes, see the <a href="getting_collection_notes.html">Getting Collection Notes</a> page.</li>
</ul>
</div>
<h2 id="examples">Examples</h2>
<h3 id="successful-request">Successful Request</h3>
<p>The example shows a successful request to create a shipment group. The group comprises three valid shipments and has a <code>custom_reference</code> of <em>Example123</em>.</p>
<div class="tabGroup" id="tabgroup_bHGHmlrG6S">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_create-shipment-group-request" role="tab" aria-controls="tabpanel_bHGHmlrG6S_create-shipment-group-request" data-tab="create-shipment-group-request" tabindex="0" aria-selected="true">Create Shipment Group Request</a>
</li>
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_create-shipment-group-response" role="tab" aria-controls="tabpanel_bHGHmlrG6S_create-shipment-group-response" data-tab="create-shipment-group-response" tabindex="-1">Create Shipment Group Response</a>
</li>
</ul>
<section id="tabpanel_bHGHmlrG6S_create-shipment-group-request" role="tabpanel" data-tab="create-shipment-group-request">

<pre><code class="lang-json">{
    &quot;custom_reference&quot;: &quot;Example123&quot;,
    &quot;shipments&quot;: [
        &quot;sp_00013464648910021776641789788160&quot;,
        &quot;sp_00013464648910021776641789784435&quot;,
        &quot;sp_00013464648910021776641789790773&quot;
    ]
}
</code></pre>
</section>
<section id="tabpanel_bHGHmlrG6S_create-shipment-group-response" role="tabpanel" data-tab="create-shipment-group-response" aria-hidden="true" hidden="hidden">

<pre><code class="lang-json">{
  &quot;reference&quot;: &quot;sg_00679577652026749527919113797632&quot;,
  &quot;custom_reference&quot;: &quot;Example123&quot;,
  &quot;version&quot;: 79,
  &quot;message&quot;: &quot;Shipment group sg_00679577652026749527919113797632 created successfully&quot;,
  &quot;_links&quot;: [
    {
      &quot;href&quot;: &quot;https://beta.sorted.com/pro/shipments/groups/sg_00679577652026749527919113797632&quot;,
      &quot;rel&quot;: &quot;self&quot;,
      &quot;reference&quot;: &quot;sg_00679577652026749527919113797632&quot;,
      &quot;type&quot;: &quot;shipment_group&quot;
    }
  ]
}
</code></pre>
</section>
</div>

<p>Note the <code>version</code> number of <em>79</em> in the response, indicating that the user has used the <code>custom_reference</code> <em>Example123</em> 78 times before.</p>
<h3 id="invalid-shipment-reference">Invalid Shipment Reference</h3>
<p>Like the first example, this example response shows the successful creation of a shipment group. However, in this case not all of the shipments provided are valid, with one of the provided <code>references</code> in an invalid formant and another corresponding to a non-existent shipment. PRO has indicated the shipments that could not be added to the group in its response.</p>
<div class="NOTE">
<h5>Note</h5>
<p>In this case, the HTTP status code of the response would be <code>207 (Multi-status)</code>. This code enables you to to differentiate between completely successful and partially successful group creation requests.</p>
</div>
<div class="tabGroup" id="tabgroup_bHGHmlrG6S-1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S-1_invalid-shipment-reference-response" role="tab" aria-controls="tabpanel_bHGHmlrG6S-1_invalid-shipment-reference-response" data-tab="invalid-shipment-reference-response" tabindex="0" aria-selected="true">Invalid Shipment Reference Response</a>
</li>
</ul>
<section id="tabpanel_bHGHmlrG6S-1_invalid-shipment-reference-response" role="tabpanel" data-tab="invalid-shipment-reference-response">

<pre><code class="lang-json">{
        &quot;errors&quot;: [
        {
            &quot;property&quot;: &quot;shipments&quot;,
            &quot;code&quot;: &quot;invalid_reference_format&quot;,
            &quot;message&quot;: &quot;shp_000134646476641789784435 is not a valid shipment reference&quot;
        },
        {
            &quot;property&quot;: &quot;shipments&quot;,
            &quot;code&quot;: &quot;shipment_not_found&quot;,
            &quot;message&quot;: &quot;sp_00013464648910021776641789790773 could not be found&quot;
        }
    ],
    &quot;reference&quot;: &quot;sg_00679577652026749527919113797632&quot;,
    &quot;custom_reference&quot;: &quot;Example456&quot;,
    &quot;version&quot;: 59,
    &quot;message&quot;: &quot;Shipment group sg_00679577652026749527919113797632 created successfully&quot;,
    &quot;_links&quot;: //omitted for brevity
}
</code></pre>
</section>
</div>

<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Create Shipment Group</strong> endpoint, see the <a href="/pro/api/reference/shipments.html#tag/Shipment-Groups/paths/%7E1shipment_groups/post">PRO v2 API reference</a>.</p>
</div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Learn how to retrieve existing shipment groups: <a href="getting_shipment_groups.html">Getting Shipment Groups</a></li>
<li>Learn how to add and remove shipments from groups: <a href="editing_shipment_groups.html">Editing Shipment Groups</a></li>
<li>Learn how to close shipment groups: <a href="closing_shipment_groups.html">Closing Shipment Groups</a></li>
</ul>

</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary" id="docfx-side-menu">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © Sorted Group 2021. Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
    <script type="text/javascript" src="../../../../styles/styleswitcher.js"></script>
    <script type="text/javascript" src="../../../../styles/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: false
        });
    
        window.onload = function() {
            const elements = document.getElementsByClassName("lang-mermaid");
            let index = 0;
    
            while (elements.length != 0) {
                let element = elements[0];
                mermaid.render('graph'+ index, element.innerText, (svgGraph) => {
                    element.parentElement.outerHTML = "<div class='mermaid'>" + svgGraph + "</div>";
                });
                index++;
            }
    
            addCodeCopyWrapper();
            identifyStatusCodes();
        };
    
        function addCodeCopyWrapper() {
            document.querySelectorAll('code.hljs').forEach(function (codeBlock) {
    
                var pre = codeBlock.parentNode;
    
                var containingDiv = document.createElement('div');
                containingDiv.className = 'code-copy';
    
                wrap(pre, containingDiv);
            });
            
            if (navigator && navigator.clipboard) {
                addCopyButtons(navigator.clipboard);
            } else {
                var script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js';
                script.integrity = 'sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=';
                script.crossOrigin = 'anonymous';
                script.onload = function() {
                    addCopyButtons(clipboard);
                };
    
                document.body.appendChild(script);
            }
        }
    
        function wrap(el, wrapper) {
            el.parentNode.insertBefore(wrapper, el);
            wrapper.appendChild(el);
        }
    
        function addCopyButtons(clipboard) {
            document.querySelectorAll('pre > code').forEach(function (codeBlock) {
                var button = document.createElement('button');
                button.className = 'copy-code-button';
                button.type = 'button';
    
                button.addEventListener('click', function () {
                    clipboard.writeText(codeBlock.innerText).then(function () {
                        successCopyButtonState(button);
                    }, function (error) {
                        defaultCopyButtonState(button);
                    });
                });
    
                var pre = codeBlock.parentNode;
                if (pre.parentNode.classList.contains('highlight')) {
                    var highlight = pre.parentNode;
                    highlight.parentNode.insertBefore(button, highlight);
                } else {
                    pre.parentNode.insertBefore(button, pre);
                }
    
                defaultCopyButtonState(button);
            });
        }
    
        function defaultCopyButtonState(button) {
    
            button.classList.remove('copy-success');
            button.innerText = '';
    
            var buttonSpanIcon = document.createElement('span');
            buttonSpanIcon.className = 'glyphicon glyphicon-copy';
            var buttonSpanText = document.createElement('span');
            buttonSpanText.innerText = 'Copy';
            buttonSpanText.classList.add('copy');
    
            button.appendChild(buttonSpanIcon);
            button.appendChild(buttonSpanText);
        }
    
        function successCopyButtonState(button) {
            button.blur();
    
            button.innerText = '';
    
            var buttonSpanOkIcon = document.createElement('span');
            buttonSpanOkIcon.className = 'glyphicon glyphicon-ok';
    
            button.appendChild(buttonSpanOkIcon);
    
            button.classList.add('copy-success');
    
            setTimeout(function () {
                defaultCopyButtonState(button);
            }, 2000);
        }
    
        function identifyStatusCodes() {
            document.querySelectorAll('.endpoint code').forEach(function (e) {
                highlightStatusCodes(e);
            });
        }
    
        function highlightStatusCodes(el) {
    
            var codePrefix = el.innerText.substring(0,1);
            
            if (typeof codePrefix === 'undefined' || codePrefix == null) {
                return;
            }
    
            if (codePrefix == "2") {
                el.classList.add('code-success');
                return;
            }
    
            if (codePrefix == "3") {
                el.classList.add('code-warning');
                return;
            }
    
            if (codePrefix == "4" || codePrefix == "5") {
                el.classList.add('code-error');
                return;
            }
        }
    </script>  </body>
</html>
