<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MKT96K5');</script>
    <!-- End Google Tag Manager -->
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Getting Customs Docs and Invoices | Sorted Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Getting Customs Docs and Invoices | Sorted Docs ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/c4a9dfb254.js" crossorigin="anonymous"></script>
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link rel="stylesheet" href="../../../../styles/theme-switcher.css">
  
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta id="docfx-style:rel" content="../../../../">
    <!--prevent caching the HTML-->
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKT96K5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar top-bar"></span>
                <span class="icon-bar middle-bar"></span>
                <span class="icon-bar bottom-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" src="../../../../images/sorted_logo.svg" height="auto" width="auto" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar"> 
              <div class="theme-switch-wrapper">
                <label class="theme-switch" for="theme-switcher">
                  <input type="checkbox" id="theme-switcher">
                  <div class="slider round"></div>
                </label>
              </div> 
              <div>
                <form class="navbar-form navbar-right" role="search" id="search">
                    <div class="form-group">
                    <i class="fas fa-search"></i>
                    <input type="text" class="form-control" id="search-query" placeholder="Search our documentation..." autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default custom">
            <div class="container">
                <div class="row row-nomargin">
                    <div class="hide-when-search col-sm-6" id="breadcrumb">
                        <div class="col-md-6">
                            <ul class="breadcrumb">
                            <li></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>      </header>
      <div class="container body-content">
        
        <div id="search-results" class="tech-docs">
        <div class="row">
            <div class="col-md-12">
                <button id="close-search" type="button" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;Back</button>
            </div>
        </div>
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10 docs-body" id="docfx-page-content">
            <article class="content wrap" id="_content" data-uid="pro-api-help-getting-customs-docs-and-invoices">
<h1 id="getting-customs-docs-and-invoices">Getting Customs Docs and Invoices</h1>

<!-- Time to read article - render code -->
<!--
<div class="page-stats row visible-xs">
    <ul class="page-metadata">
        <li class="li-page-date">
            02/06/2020
        </li>
        <li class="li-time-to-read">
             ~3 minutes  to read
        </li>
    </ul>
</div>
<div class="page-stats row visible-sm visible-md visible-lg visible-xl">
    <ul class="page-metadata">
        <li class="li-page-date">
            02/06/2020
        </li>
        <li class="li-time-to-read">
             ~3 minutes  to read
        </li>
        <li class="contributor-li">
            <img src="https://www.gravatar.com/avatar/75aba8f6bb41171675ba3ced4172e9cb.jpg?d=robohash" class="img-circle img-contributor" title="andy.walton@sorted.com"/>
            <span class="tooltip-text">andy.walton@sorted.com</span>
        </li>
        <li class="contributor-li">
            <img src="https://www.gravatar.com/avatar/435f6d0dafb6467a7e20a69f720fb6f1.jpg?d=robohash" class="img-circle img-contributor" title="michael.rose@sorted.com"/>
            <span class="tooltip-text">michael.rose@sorted.com</span>
        </li>
    </ul>
</div>
-->

<div class="page-tags">
    <span class="glyphicon glyphicon-tags"></span>
    <ul class="tags">
        <li class="tag-search">v1</li>
        <li class="tag-search">customs</li>
        <li class="tag-search">docs</li>
        <li class="tag-search">documents</li>
        <li class="tag-search">pro</li>
        <li class="tag-search">api</li>
        <li class="tag-search">consignments</li>
    </ul>
</div>

<p>This page explains the various way in which SortedPRO can return return customs documents and commercial invoices.</p>
<hr>
<h2 id="customs-docs-in-pro">Customs Docs in PRO</h2>
<p>When shipping internationally, SortedPRO will automatically determine if customs documentation is required for a consignment. SortedPRO can automatically generate CN22, CN23, or Commercial Invoice documents in PDF format and will determine which document is appropriate for any allocated consignment. The Customs Docs APIs enable you to retrieve the pre-generated documents.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Following the UK's departure from the EU, certain additional consignment properties must be passed in order for PRO to generate customs documentation for UK-originating international consignments. In addition, certain carriers have their own data requirements that UK-originating international consignments must meet in order to be considered for allocation to that carrier.</p>
<p>For an explanation of Brexit-related data requirements, see the <a href="../../how-to/brexit-guide.md">Brexit Data Guide</a> page.</p>
</div>
<p>The Customs Docs API has three endpoints:</p>
<ul>
<li><strong>Get Commercial Invoice</strong> - returns a consignment's commercial invoice.</li>
<li><strong>Get Customs Document</strong> - returns a CN22 or CN23 document for a particular package.</li>
<li><strong>Get Customs Documents</strong> - returns all customs documents for a particular consignment.</li>
</ul>
<div class="CAUTION">
<h5>Caution</h5>
<p>You can only retrieve documents for consignments that have been allocated to a carrier. If you attempt to return labels for an unallocated consignment, PRO returns an error.</p>
</div>
<h2 id="getting-commercial-invoices">Getting Commercial Invoices</h2>
<p>To call <strong>Get Commercial Invoice</strong>, send a <code>GET</code> request to <code>https://api.electioapp.com/consignments/docs/commercialinvoice/{consignmentReference}</code>. PRO returns the commercial invoice for the relevant consignment as a base-64 encoded byte array.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Get Commercial Invoice</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/GetCommercialInvoice">API reference</a>.</p>
</div>
<h2 id="getting-an-individual-customs-document">Getting an Individual Customs Document</h2>
<p>To call <strong>Get Customs Document</strong>, send a <code>GET</code> request to <code>https://api.electioapp.com/consignments/docs/{customsDocumentType}/{consignmentReference}/{packageReference}</code>. The <code>{customsDocumentType}</code> can return either <em>CN22</em> or <em>CN23</em> documents.</p>
<p>PRO returns the relevant document as a base-64 encoded byte array.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Get Customs Document</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/GetCustomsDocument">API reference</a>.</p>
</div>
<h2 id="getting-all-customs-documents-for-a-consignment">Getting All Customs Documents for a Consignment</h2>
<p>To call <strong>Get Customs Documents</strong>, send a <code>GET</code> request to <code>https://api.electioapp.com/consignments/docs/{consignmentReference}</code>.</p>
<p>PRO returns an object containing two properties: a <code>CommercialInvoiceDocuments</code> property containing the consignment's commercial invoice and either a <code>CN22Documents</code> property containing all CN22 documents for the consignment or a <code>CN23Documents</code> property containing all CN23 documents for the consignment.</p>
<p>All documents are represented as key / value pairs, with the key as the filename for the document and the value containing the document data.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Get Customs Documents</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/GetCustomsDocuments">API reference</a>.</p>
</div>
<h3 id="get-customs-documents-example">Get Customs Documents Example</h3>
<p>This example shows a <strong>Get Customs Documents</strong> response for a single-package consignment. PRO has returned a commercial invoice for the consignment and a CN22 document for the package.</p>
<div class="tabGroup" id="tabgroup_bHGHmlrG6S">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_get-customs-documents-response" role="tab" aria-controls="tabpanel_bHGHmlrG6S_get-customs-documents-response" data-tab="get-customs-documents-response" tabindex="0" aria-selected="true">Get Customs Documents Response</a>
</li>
</ul>
<section id="tabpanel_bHGHmlrG6S_get-customs-documents-response" role="tabpanel" data-tab="get-customs-documents-response">

<pre><code class="lang-json">{
  &quot;CommercialInvoiceDocuments&quot;: [
    {
      &quot;Key&quot;: &quot;INV_Example&quot;,
      &quot;Value&quot;: &quot;(document data)&quot;
    }
  ],
  &quot;CN22Documents&quot;: [
    {
      &quot;Key&quot;: &quot;CN22_Example&quot;,
      &quot;Value&quot;: &quot;(document data)&quot;
    }
  ]
}
</code></pre>
</section>
</div>

<div class="NOTE">
<h5>Note</h5>
<p>Once you have downloaded the file data, you will need to decode the file's Base64 in order to view the document itself. If you are unsure how to do so, see the <strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding">MDN docs</a></strong> for more information.</p>
</div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Learn how to get and print delivery labels at the <a href="getting_labels.html">Getting Labels</a> page.</li>
<li>Learn how to add consignments to a carrier manifest at the <a href="manifesting_consignments.html">Manifesting Consignments</a> page.</li>
<li>Learn how to track consignments at the <a href="tracking_consignments.html">Tracking Consignments</a> page.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>All of the URLs and examples given in this documentation relate to PRO's live production environment. To call APIs in the sandbox environment, substitute the <code>api.electioapp.com</code> portion of the API's base URL with <code>apisandbox.electioapp.com</code>. Don't forget to use your sandbox API key (as opposed to your production API key) when making the call.</p>
<p>For more information on PRO's sandbox, see <a href="introduction.html#using-the-sandbox-environment">Using the Sandbox Environment</a>.</p>
</div>

</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary" id="docfx-side-menu">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © Sorted Group 2021. Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
    <script type="text/javascript" src="../../../../styles/styleswitcher.js"></script>
    <script type="text/javascript" src="../../../../styles/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: false
        });
    
        window.onload = function() {
            const elements = document.getElementsByClassName("lang-mermaid");
            let index = 0;
    
            while (elements.length != 0) {
                let element = elements[0];
                mermaid.render('graph'+ index, element.innerText, (svgGraph) => {
                    element.parentElement.outerHTML = "<div class='mermaid'>" + svgGraph + "</div>";
                });
                index++;
            }
    
            addCodeCopyWrapper();
            identifyStatusCodes();
        };
    
        function addCodeCopyWrapper() {
            document.querySelectorAll('code.hljs').forEach(function (codeBlock) {
    
                var pre = codeBlock.parentNode;
    
                var containingDiv = document.createElement('div');
                containingDiv.className = 'code-copy';
    
                wrap(pre, containingDiv);
            });
            
            if (navigator && navigator.clipboard) {
                addCopyButtons(navigator.clipboard);
            } else {
                var script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js';
                script.integrity = 'sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=';
                script.crossOrigin = 'anonymous';
                script.onload = function() {
                    addCopyButtons(clipboard);
                };
    
                document.body.appendChild(script);
            }
        }
    
        function wrap(el, wrapper) {
            el.parentNode.insertBefore(wrapper, el);
            wrapper.appendChild(el);
        }
    
        function addCopyButtons(clipboard) {
            document.querySelectorAll('pre > code').forEach(function (codeBlock) {
                var button = document.createElement('button');
                button.className = 'copy-code-button';
                button.type = 'button';
    
                button.addEventListener('click', function () {
                    clipboard.writeText(codeBlock.innerText).then(function () {
                        successCopyButtonState(button);
                    }, function (error) {
                        defaultCopyButtonState(button);
                    });
                });
    
                var pre = codeBlock.parentNode;
                if (pre.parentNode.classList.contains('highlight')) {
                    var highlight = pre.parentNode;
                    highlight.parentNode.insertBefore(button, highlight);
                } else {
                    pre.parentNode.insertBefore(button, pre);
                }
    
                defaultCopyButtonState(button);
            });
        }
    
        function defaultCopyButtonState(button) {
    
            button.classList.remove('copy-success');
            button.innerText = '';
    
            var buttonSpanIcon = document.createElement('span');
            buttonSpanIcon.className = 'glyphicon glyphicon-copy';
            var buttonSpanText = document.createElement('span');
            buttonSpanText.innerText = 'Copy';
            buttonSpanText.classList.add('copy');
    
            button.appendChild(buttonSpanIcon);
            button.appendChild(buttonSpanText);
        }
    
        function successCopyButtonState(button) {
            button.blur();
    
            button.innerText = '';
    
            var buttonSpanOkIcon = document.createElement('span');
            buttonSpanOkIcon.className = 'glyphicon glyphicon-ok';
    
            button.appendChild(buttonSpanOkIcon);
    
            button.classList.add('copy-success');
    
            setTimeout(function () {
                defaultCopyButtonState(button);
            }, 2000);
        }
    
        function identifyStatusCodes() {
            document.querySelectorAll('.endpoint code').forEach(function (e) {
                highlightStatusCodes(e);
            });
        }
    
        function highlightStatusCodes(el) {
    
            var codePrefix = el.innerText.substring(0,1);
            
            if (typeof codePrefix === 'undefined' || codePrefix == null) {
                return;
            }
    
            if (codePrefix == "2") {
                el.classList.add('code-success');
                return;
            }
    
            if (codePrefix == "3") {
                el.classList.add('code-warning');
                return;
            }
    
            if (codePrefix == "4" || codePrefix == "5") {
                el.classList.add('code-error');
                return;
            }
        }
    </script>  </body>
</html>
