<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MKT96K5');</script>
    <!-- End Google Tag Manager -->
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Allocating to a Specific Carrier Service | Sorted Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Allocating to a Specific Carrier Service | Sorted Docs ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/c4a9dfb254.js" crossorigin="anonymous"></script>
  
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link rel="stylesheet" href="../../../../styles/theme-switcher.css">
  
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta id="docfx-style:rel" content="../../../../">
    <!--prevent caching the HTML-->
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MKT96K5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar top-bar"></span>
                <span class="icon-bar middle-bar"></span>
                <span class="icon-bar bottom-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" src="../../../../images/sorted_logo.svg" height="auto" width="auto" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar"> 
              <div class="theme-switch-wrapper">
                <label class="theme-switch" for="theme-switcher">
                  <input type="checkbox" id="theme-switcher">
                  <div class="slider round"></div>
                </label>
              </div> 
              <div>
                <form class="navbar-form navbar-right" role="search" id="search">
                    <div class="form-group">
                    <i class="fas fa-search"></i>
                    <input type="text" class="form-control" id="search-query" placeholder="Search our documentation..." autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>        
        <div class="subnav navbar navbar-default custom">
            <div class="container">
                <div class="row row-nomargin">
                    <div class="hide-when-search col-sm-6" id="breadcrumb">
                        <div class="col-md-6">
                            <ul class="breadcrumb">
                            <li></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>      </header>
      <div class="container body-content">
        
        <div id="search-results" class="tech-docs">
        <div class="row">
            <div class="col-md-12">
                <button id="close-search" type="button" class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;Back</button>
            </div>
        </div>
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10 docs-body" id="docfx-page-content">
            <article class="content wrap" id="_content" data-uid="pro-api-help-allocating-to-a-specific-carrier-service">
<h1 id="allocating-to-a-specific-carrier-service">Allocating to a Specific Carrier Service</h1>

<!-- Time to read article - render code -->
<!--
<div class="page-stats row visible-xs">
    <ul class="page-metadata">
        <li class="li-page-date">
            28/05/2020
        </li>
        <li class="li-time-to-read">
             ~2 minutes  to read
        </li>
    </ul>
</div>
<div class="page-stats row visible-sm visible-md visible-lg visible-xl">
    <ul class="page-metadata">
        <li class="li-page-date">
            28/05/2020
        </li>
        <li class="li-time-to-read">
             ~2 minutes  to read
        </li>
        <li class="contributor-li">
            <img src="https://www.gravatar.com/avatar/75aba8f6bb41171675ba3ced4172e9cb.jpg?d=robohash" class="img-circle img-contributor" title="andy.walton@sorted.com"/>
            <span class="tooltip-text">andy.walton@sorted.com</span>
        </li>
        <li class="contributor-li">
            <img src="https://www.gravatar.com/avatar/435f6d0dafb6467a7e20a69f720fb6f1.jpg?d=robohash" class="img-circle img-contributor" title="michael.rose@sorted.com"/>
            <span class="tooltip-text">michael.rose@sorted.com</span>
        </li>
    </ul>
</div>
-->

<div class="page-tags">
    <span class="glyphicon glyphicon-tags"></span>
    <ul class="tags">
        <li class="tag-search">v1</li>
        <li class="tag-search">allocation</li>
        <li class="tag-search">pro</li>
        <li class="tag-search">api</li>
        <li class="tag-search">consignments</li>
    </ul>
</div>

<p>Want to specify the carrier service that should take your consignment? This page explains how to allocate consignments to services manually.</p>
<hr>
<h2 id="getting-the-carrier-service-reference">Getting the Carrier Service Reference</h2>
<p>In order to allocate a consignment to a specific carrier service, you'll need to know that service's <code>{MpdCarrierServiceReference}</code>. The <code>{MpdCarrierServiceReference}</code> is a unique identifier for each service available in PRO.</p>
<p>There are two ways of obtaining a carrier service's <code>{MpdCarrierServiceReference}</code>:</p>
<ul>
<li><p><strong>Via the UI</strong> - The <a href="https://www.electioapp.com/Configuration/carrierservices/">Carrier Services</a> page (<strong>Settings</strong> &gt; <strong>Carrier Services</strong>) displays a list of all available services. The <code>{MpdCarrierServiceReference}</code> for each service is displayed in the <strong>Service Code</strong> field.</p>
</li>
<li><p><strong>Via API</strong> - The <strong>Get Available MPD Carrier Services</strong> endpoint returns a list of all available services.  The <code>{MpdCarrierServiceReference}</code> for each service is displayed in the <code>Reference</code> field.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Get Available MPD Carrier Services</strong> endpoint, see the <strong><a href="https://docs.electioapp.com/#/api/GetAvailableMPDCarrierServices">Get Available MPD Carrier Services</a></strong> page of the API reference.</p>
</div>
</li>
</ul>
<h2 id="allocating-to-a-carrier-service-manually">Allocating to a Carrier Service Manually</h2>
<p>The <strong>Allocate With Carrier Service</strong> endpoint enables you to allocate one or more consignments to a specific carrier service.</p>
<p>To call <strong>Allocate With Carrier Service</strong>, make a <code>PUT</code> request to <code>https://api.electioapp.com/allocation/allocatewithcarrierservice</code>. The body of the request should contain the <code>{MpdCarrierServiceReference}</code> of the carrier service you want to allocate to, and an array of <code>consignmentReferences</code> listing the references of the consignments you want to allocate to that service.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For full reference information on the <strong>Allocate With Carrier Service</strong> endpoint, see the <strong><a href="https://docs.electioapp.com/#/api/AllocateWithCarrierService">Allocate With Carrier Service</a></strong> page of the API reference.</p>
</div>
<p>Once the request is received, SortedPRO takes each consignment in turn and checks whether the specified service is eligible to take that consignment. If the specified service can meet the consignment's delivery promise, and allocating to that service would not break any existing allocation rules, then PRO allocates the consignment to that service and returns an allocation summary.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For information on using allocation rules, see the <a href="allocating_consignments.html#what-is-an-allocation-rule">What Is An Allocation Rule?</a> section of the <a href="allocating_consignments.html">Allocating Consignments To Carriers</a> page.</p>
</div>
<p>If PRO is unable to allocate the consignment to the specified carrier service, it puts the consignment into a state of <em>Allocation Failed</em> and takes no further action. For information on dealing with failed allocations, see the <em>Manage Not Shipped Consignments</em> section of the PRO UI User Manual.</p>
<h3 id="allocate-with-carrier-service-example">Allocate With Carrier Service Example</h3>
<p>The example shows a request to allocate three consignments to a carrier service with an <code>{MpdCarrierServiceReference}</code> of <em>Example-Carrier-Service</em> .</p>
<div class="tabGroup" id="tabgroup_bHGHmlrG6S">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_bHGHmlrG6S_allocate-with-carrier-service-request" role="tab" aria-controls="tabpanel_bHGHmlrG6S_allocate-with-carrier-service-request" data-tab="allocate-with-carrier-service-request" tabindex="0" aria-selected="true">Allocate With Carrier Service Request</a>
</li>
</ul>
<section id="tabpanel_bHGHmlrG6S_allocate-with-carrier-service-request" role="tabpanel" data-tab="allocate-with-carrier-service-request">

<p><code>PUT https://api.electioapp.com/allocation/allocatewithcarrierservice</code></p>
<pre><code class="lang-json">{
  &quot;MpdCarrierServiceReference&quot;: &quot;Example-Carrier-Service&quot;,
  &quot;ConsignmentReferences&quot;: [
    &quot;EC-000-05A-Z6S&quot;,
    &quot;EC-000-083-45D&quot;,
    &quot;EC-000-A04-0DV&quot;
  ]
}
</code></pre>
</section>
</div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>Learn about alternative methods of allocating consignments at the <a href="allocating_consignments.html">Allocating Consignments</a> page.</li>
<li>Learn how to get and print delivery labels at the <a href="getting_labels.html">Getting Labels</a> page.</li>
<li>Learn how to add consignments to a carrier manifest at the <a href="manifesting_consignments.html">Manifesting Consignments</a> page.</li>
</ul>

</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary" id="docfx-side-menu">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright © Sorted Group 2021. Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
    <script type="text/javascript" src="../../../../styles/styleswitcher.js"></script>
    <script type="text/javascript" src="../../../../styles/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: false
        });
    
        window.onload = function() {
            const elements = document.getElementsByClassName("lang-mermaid");
            let index = 0;
    
            while (elements.length != 0) {
                let element = elements[0];
                mermaid.render('graph'+ index, element.innerText, (svgGraph) => {
                    element.parentElement.outerHTML = "<div class='mermaid'>" + svgGraph + "</div>";
                });
                index++;
            }
    
            addCodeCopyWrapper();
            identifyStatusCodes();
        };
    
        function addCodeCopyWrapper() {
            document.querySelectorAll('code.hljs').forEach(function (codeBlock) {
    
                var pre = codeBlock.parentNode;
    
                var containingDiv = document.createElement('div');
                containingDiv.className = 'code-copy';
    
                wrap(pre, containingDiv);
            });
            
            if (navigator && navigator.clipboard) {
                addCopyButtons(navigator.clipboard);
            } else {
                var script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js';
                script.integrity = 'sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=';
                script.crossOrigin = 'anonymous';
                script.onload = function() {
                    addCopyButtons(clipboard);
                };
    
                document.body.appendChild(script);
            }
        }
    
        function wrap(el, wrapper) {
            el.parentNode.insertBefore(wrapper, el);
            wrapper.appendChild(el);
        }
    
        function addCopyButtons(clipboard) {
            document.querySelectorAll('pre > code').forEach(function (codeBlock) {
                var button = document.createElement('button');
                button.className = 'copy-code-button';
                button.type = 'button';
    
                button.addEventListener('click', function () {
                    clipboard.writeText(codeBlock.innerText).then(function () {
                        successCopyButtonState(button);
                    }, function (error) {
                        defaultCopyButtonState(button);
                    });
                });
    
                var pre = codeBlock.parentNode;
                if (pre.parentNode.classList.contains('highlight')) {
                    var highlight = pre.parentNode;
                    highlight.parentNode.insertBefore(button, highlight);
                } else {
                    pre.parentNode.insertBefore(button, pre);
                }
    
                defaultCopyButtonState(button);
            });
        }
    
        function defaultCopyButtonState(button) {
    
            button.classList.remove('copy-success');
            button.innerText = '';
    
            var buttonSpanIcon = document.createElement('span');
            buttonSpanIcon.className = 'glyphicon glyphicon-copy';
            var buttonSpanText = document.createElement('span');
            buttonSpanText.innerText = 'Copy';
            buttonSpanText.classList.add('copy');
    
            button.appendChild(buttonSpanIcon);
            button.appendChild(buttonSpanText);
        }
    
        function successCopyButtonState(button) {
            button.blur();
    
            button.innerText = '';
    
            var buttonSpanOkIcon = document.createElement('span');
            buttonSpanOkIcon.className = 'glyphicon glyphicon-ok';
    
            button.appendChild(buttonSpanOkIcon);
    
            button.classList.add('copy-success');
    
            setTimeout(function () {
                defaultCopyButtonState(button);
            }, 2000);
        }
    
        function identifyStatusCodes() {
            document.querySelectorAll('.endpoint code').forEach(function (e) {
                highlightStatusCodes(e);
            });
        }
    
        function highlightStatusCodes(el) {
    
            var codePrefix = el.innerText.substring(0,1);
            
            if (typeof codePrefix === 'undefined' || codePrefix == null) {
                return;
            }
    
            if (codePrefix == "2") {
                el.classList.add('code-success');
                return;
            }
    
            if (codePrefix == "3") {
                el.classList.add('code-warning');
                return;
            }
    
            if (codePrefix == "4" || codePrefix == "5") {
                el.classList.add('code-error');
                return;
            }
        }
    </script>  </body>
</html>
